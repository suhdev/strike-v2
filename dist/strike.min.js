!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(1),o=n(2),i=n(3),s=n(8),a=n(11),u=n(12),c=n(13),p=n(14),h=n(15),f=n(7),d=n(16);!function(){window&&document&&(window.StrikeJS={AppActionDispatcher:r.AppActionDispatcher,Combiner:o.Combiner,Router:i.Router,Store:s.Store,WorkerMiddleware:a.WorkerMiddleware,ControllerView:p.ControllerView,Injector:c.Injector,Promisify:u.Promisify,IntegerPromisifer:h.IntegerPromisifer,printf:f.printf,format:f.format,setDataAt:f.setDataAt,getDataAt:f.getDataAt,createFormatter:f.createFormatter,Injectable:d.Injectable})}()},function(t,e){"use strict";function n(t){var e=16777216,n={},r=0;return function(o,i){if(o.app=o.app||i,"string"==typeof o.type)return void t.dispatch(o);var s=o.app,a=0;s&&(a=n[s],a||(r+=e,a=n[s]=r),o.type=a|o.type)}}e.AppActionDispatcher=n},function(t,e){"use strict";var n=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.reducers={};var n=0;for(n=0;n<t.length;n++)this.addReducer(t[n])}return t.combine=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(t.bind.apply(t,[void 0].concat(e)))},t.prototype.addReducer=function(t){"string"==typeof t&&2===arguments.length?this.reducers[t]=arguments[1]:"function"==typeof t&&t.$name?this.reducers[t.$name]=t:"function"==typeof t&&t.name&&(this.reducers[t.name]=t)},t.prototype.removeReducer=function(t){"function"==typeof t&&t.$name&&this.reducers[t.$name]?delete this.reducers[t.$name]:"function"==typeof t&&t.name&&this.reducers[t.name]?delete this.reducers[t.name]:"string"==typeof t&&this.reducers[t]&&delete this.reducers[t]},t.prototype.update=function(t,e){var n=t,r=null,o=this.reducers,i=null,s=null;for(r in o)i=t.get(r),s=o[r](i,e),s!=i&&(n=n.set(r,s));return n},t}();e.Combiner=n},function(t,e,n){"use strict";function r(t,e){var n={};return t.map(function(t){n[t]=e.get(t)}),n}function o(t,e){function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 2==t.length?a.meta[t[0]]=t[1]:1==t.length&&"object"==typeof a.meta&&(a.meta=t[0]),u}function r(){return c}function o(t){return a.routes.push(t),u}function s(){t.attachApp(a)}var a={routes:[],meta:{},$inject:e.$inject||[],component:e},u={addRoute:o,meta:n,routes:r,attach:s},c=i(u);return u}function i(t){function e(t){return c.routeDef=a(t),p}function n(t){return c.data=t,p}function r(t){return c.onMount=t,p}function o(t){return c.onLeave=t,p}function i(t){return c.onBeforeMount=t,p}function s(){return c&&c.routeDef&&t.addRoute(c),t}function u(){return t.addRoute(c),c={routeDef:null},p}var c={routeDef:null,params:{}},p={add:u,rule:e,data:n,onMount:r,onBeforeMount:i,onLeave:o,create:s};return p}function s(t,e){for(var n=0,r=t.routeDef,o=r.routeParams,i=o.length;n<i;n++)t.params[o[n][0]]=d[o[n][1]](e[n+1]);return t}function a(t){var e=[],n=t.replace(/:([\S]+):(number|string|boolean)/g,function(t,n,r){return e.push([n,r]),f[r]}).replace(/:([\S]+)/g,function(t,n){return e.push([n,"string"]),f.string});return{routeParams:e,regex:new RegExp("^"+n+"$","i")}}var u=n(4),c=n(5),p=n(6),h=n(7),f={number:"([0-9]+)",string:"([\\S]+)",boolean:"(true|false|TRUE|FALSE)"},d={number:parseFloat,string:h.identity,boolean:function(t){return"true"===t.toLowerCase()}},l=function(){function t(t){var e=this;this._prevHash=null,this._handler=t,this._silent=!1,this._currentHash=location.hash.substr(1),this._onHashChange=this._onHashChange.bind(this),setTimeout(function(){e._handler.onRouteChange(e._currentHash,"")},0),window.addEventListener("hashchange",this._onHashChange)}return t.prototype._onHashChange=function(){var t=this;if(!this._silent){var e=this._currentHash,n=location.hash.substr(1);this._handler.onRouteChange(n,e).then(function(){t._prevHash=e,t._currentHash=n},function(){t._silent=!0,location.hash="#"+t._currentHash})}this._silent=!1},t.prototype.getCurrentRoute=function(){return this._currentHash},t.prototype.getPrevRoute=function(){return this._prevHash},t.prototype.goBack=function(t){this._currentHash=this._prevHash,this._silent=t,location.hash="#"+this._currentHash,this._silent=!1},t.prototype.setHandler=function(t){this._handler=t},t.prototype.destroy=function(){window.removeEventListener("hashchange",this._onHashChange)},t}(),y=function(){function t(t,e,n,r){this._el=t,this._store=e,this._injector=n,this._defaultApp={component:null,routes:[]},this._actionType=r.actionType,this._appDefs=[this._defaultApp],this._currentRoute=null,this._strategy=r.strategy||new l(this)}return t.prototype.onRouteChange=function(t,e){var n=this,o=0,i=this._appDefs,a=i.length,h=null,f=null,d=null,l=null,y=!1,m=null,g=null;return new p(function(t,e){return n._currentRoute&&n._currentRoute.onLeave?void n._currentRoute.onLeave(n._currentRoute,n._injector).then(t,e):void t()}).then(function(){for(;o<a;o++){h=i[o],f=h.routes;for(var e=0,p=f.length;e<p;e++)if(d=f[e],m=d.routeDef,l=m.regex,l.lastIndex=0,g=t.match(l)){y=!0;break}if(y)break}if(y){d.params=d.params||{};var v=s(d,g);if(n._currentRoute!==d&&h!==n._currentApp&&(n._prevRoute=n._currentRoute,n._currentRoute=v,d.onBeforeMount&&d.onBeforeMount(),n._currentApp=h,h.component)){c.unmountComponentAtNode(n._el);var _=(h.component,r(h.$inject||[],n._injector));_.store=n._store,n._activeComponent=c.render(u.createElement(h.component,_),n._el,d.onMount)}n._store.dispatch({type:n._actionType,data:{route:{data:d.data,params:d.params},appMeta:h.meta}})}return 1})},t.prototype.attachApp=function(t){this._appDefs.push(t)},t.prototype.route=function(){return i(this)},t.prototype.addRoute=function(t){this._defaultApp.routes.push(t)},t.prototype.data=function(t,e){var n=this._currentRoute;return arguments.length>1?void(n&&h.setDataAt(n.data,t,e,".")):n&&h.getDataAt(n.data,t,".")},t.prototype.param=function(t){return this._currentRoute&&this._currentRoute.params[t]},t.prototype.register=function(t){return o(this,t)},t.prototype.destroy=function(){this._strategy.destroy()},t}();e.Router=y},function(t,e){t.exports=React},function(t,e){t.exports=ReactDOM},function(t,e){t.exports=Promise},function(t,e){"use strict";function n(t,e){for(var n=[],r=0;r<e;r++)n.push(t);return n.join("")}function r(t){return t}function o(t){var e;return t.toString().replace(/^function[\s]+?[\S]+?\((.*?)\)/,function(t,n,r){return e=n.trim().length>0&&n.trim().split(/[\s,]+/)||[],t}),e}function i(t,e,n){for(var r,o,i=t,s=n?n:".",a=e.split(s);(r=a.shift())&&(o=i[r])&&(i=o););return o}function s(t,e,n,r){for(var o,i,s=t,a=r?r:".",u=e.split(a),c=u.length>0?u.splice(u.length-1,1)[0]:null;(o=u.shift())&&((i=s[o])||(i=s[o]={}))&&(s=i););i[c]=n}function a(t,e){return e?t.replace(/\{(.*?)\}/g,function(t,n){return e&&e[n]||t}):t}function u(){function t(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var i=new RegExp("%("+e.join("|")+")"),s=r.reduce(function(t,e,r){return t.replace(i,function(t,r){var o=r.length,i=r.charAt(o-1);return p[r]&&p[r](e)||n[r]&&n[r](e)||p[i]&&p[i](e,r.substr(0,o-1))||n[i]&&n[i](e,r.substr(0,o-1))})},t);return s}var e=["[0-9]+?.[0-9]+?d","[0-9]+?d",".[0-9]+?d","d","x","s","o","typeof"],n={};return{addFormat:function(t,r){n[t]=r,e.push(t)},addFormatFirst:function(t,r){n[t]=r,e.unshift(t)},format:t}}function c(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e.reduce(function(t,e,n){return t.replace(/%([0-9]+?\.[0-9]+?d|[0-9]+?d|\.[0-9]+?d|d|x|s|o|typeof)/,function(t,n){var r=n.length,o=n.charAt(r-1);return p[n]&&p[n](e)||p[o]&&p[o](e,n.substr(0,r-1))})},t);return r}e.repeat=n,e.identity=r,e.extractArgumentsFromFunction=o,e.getDataAt=i,e.setDataAt=s,e.format=a;var p={typeof:function(t){return typeof t},d:function(t,e){if(e&&"."===e.charAt(0))return t.toFixed(+e.substr(1));if(/^[0-9]+$/.test(e)){var r=parseInt(e),o=t+"";return o.length<r?n("0",r-o.length)+o:o}if(/^[0-9]+\.[0-9]+$/.test(e)){var r=parseFloat(e),o=+(r-Math.floor(r)+"").substr(2);parseInt(t),t.toFixed(o)}return t},x:function(t){return t.toString(16)},o:function(t){return"object"==typeof t?t.toJSON?JSON.stringify(t.toJSON()):t.toString():t},s:function(t){return t}};e.createFormatter=u,e.printf=c},function(t,e,n){"use strict";function r(){function t(){c=!1,u--,a.length>0&&e()}function e(){c=!0;for(var e=null;(e=a.shift())&&e.status===o.OBSELETE;);e&&requestAnimationFrame(function(){e.status=o.EXECUTING,e.value[0].setState(e.value[1],t)})}function n(t,n){var s,u=t.getStateKey(),p=i[u];return s=r.get(),s.status=o.PENDING,s.value=[t,n],p||(p=i[u]=[]),c?(p=p.filter(function(t){var e=t.status===o.EXECUTING;return e||(t.status=o.OBSELETE),e}),p.push(s),void a.push(s)):(a.push(s),e(),void(c=!0))}var r=s.createPool(function(){return{key:"",value:null,status:o.PENDING}}),i={},a=[],u=0,c=!1,p={run:n};return p}var o,i=n(2),s=n(9),a=n(10);!function(t){t[t.PENDING=1]="PENDING",t[t.EXECUTING=2]="EXECUTING",t[t.FINISHED=3]="FINISHED",t[t.OBSELETE=4]="OBSELETE"}(o||(o={}));var u=function(){function t(t){a.Map;this.readyForActions=t.ready||!1,this.state=t.initialState||a.Map(),this.combiner=i.Combiner.combine(),this.middleware=t.middlewares||[],this.prevState={},this.trackChanges=t.trackChanges||!1,this.prevActions=[],this.components=[],this.queue=[],this.dispatcher=r(),this.replaceStateAt=this.replaceStateAt.bind(this),this.addMiddleware=this.addMiddleware.bind(this),this.applyMiddleware=this.applyMiddleware.bind(this),this.connect=this.connect.bind(this),this.disconnect=this.disconnect.bind(this),this.dispatch=this.dispatch.bind(this),this.executeWithState=this.executeWithState.bind(this),this.getStateAt=this.getStateAt.bind(this),this.ready=this.ready.bind(this)}return t.prototype.connect=function(t){var e=t.getStateKey();this.components.push(t),t.getReducer&&this.combiner.addReducer(e,t.getReducer()),this.replaceStateAt(e,a.Map(t.state))},t.prototype.addMiddleware=function(t){this.middleware.push(t)},t.prototype.removeMiddleware=function(t){var e=this.middleware.indexOf(t);e!==-1&&this.middleware.splice(e,1)},t.prototype.prev=function(){var t=this.prevActions.pop();t&&this.dispatch(t)},t.prototype.getStateAt=function(t){return this.state.get(t)},t.prototype.getState=function(){return this.state},t.prototype.replaceStateAt=function(t,e){this.state=this.state.set(t,e)},t.prototype.deleteStateAt=function(t){this.state=this.state.delete(t)},t.prototype.applyMiddleware=function(t){var e=this;return this.middleware.reduce(function(t,n,r,o){return t?n(t,e):null},t)},t.prototype.disconnect=function(t){var e=t.getStateKey();this.combiner.removeReducer(e),this.state=this.state.delete(e);var n=this.components.indexOf(t);n!==-1&&this.components.splice(n,1)},t.prototype.dispatch=function(t){var e=this;if(!this.readyForActions)return void this.queue.push(t);this.prevState=this.state;var n=this.applyMiddleware(t);if(n){this.trackChanges&&this.prevActions.push(n);var r,o=this.state;this.state=this.combiner.update(this.state,n);this.components.forEach(function(t){r=e.state.get(t.getStateKey()),a.Map.isMap(r)?r&&r!==o.get(t.getStateKey())&&e.dispatcher.run(t,r.toObject()):e.dispatcher.run(t,r)})}},t.prototype.executeWithState=function(t,e){var n=this;return t(e.map(function(t){return n.getStateAt(t)}))},t.prototype.ready=function(){this.readyForActions=!0;for(var t;t=this.queue.shift();)this.dispatch(t)},t.create=function(e,n,r,o){return new t({initialState:e,middlewares:n,trackChanges:r,ready:o})},t}();e.Store=u},function(t,e){"use strict";function n(t){function e(){return o.length>0?o.shift():t()}function n(t){o.push(t)}function r(){o=[]}var o=[];return{get:e,put:n,destory:r}}e.createPool=n},function(t,e){t.exports=Immutable},function(t,e){"use strict";function n(t,e){return t.onmessage=function(t){var n=t.data;e.dispatch(n)},function(e,n){return e.isWorker?(t.postMessage(e),null):e}}e.WorkerMiddleware=n},function(t,e){"use strict";function n(t,e){return"undefined"==typeof t.promise?t:(t.promise.then(function(n){e.dispatch({type:"Resolved"+t.type,data:n})},function(n){e.dispatch({type:"Rejected"+t.type,data:n})}),{type:"Fetching"+t.type,data:t.data})}e.Promisify=n},function(t,e,n){"use strict";var r=n(7),o=function(){function t(){this.components={},this.instances={},this.stack=[]}return t.prototype.addInstance=function(t,e){return this.instances[t]=e},t.prototype.addComponent=function(t,e){return this.components[t]=e},t.prototype.hasComponent=function(t){return this.components[t]},t.prototype.hasInstance=function(t){return this.instances[t]},t.prototype.injectFunction=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if("function"!=typeof t)throw new Error("Injector: provided argument is not a function");var i,s=[],a=e||null;if(t.$inject=t.$inject||r.extractArgumentsFromFunction(t),!t.$inject||0===t.$inject.length)return t.factory?t.factory():t();for(;i=t.$inject.shift();)s.push(this.get(i));return t.factory?t.factory.apply(a,[].concat(s,Array.prototype.slice.call(n,0))):t.apply(a,[].concat(s,Array.prototype.slice.call(n,0)))},t.prototype._inject=function(t,e){var n,r=[];if(!e.$inject||0===e.$inject.length)return this.addInstance(t,e.factory?e.factory():e());if(this.stack.indexOf(t)!==-1)throw new Error("Circular dependency: "+this.stack.join(" -> ")+" -> "+t);for(this.stack.push(t);n=e.$inject.shift();)r.push(this.get(n));return this.stack.pop(),this.instances[t]=e.factory?e.factory.apply(null,r):e.apply(null,r)},t.prototype.get=function(t){if(this.instances[t])return this.instances[t];if(!this.components[t])throw new Error("Component: "+t+" could not be found");return this._inject(t,this.components[t])},t.prototype.register=function(){var t,e,n;if(0===arguments.length)throw new Error("Injector: no agruments provided.");if(2===arguments.length){if("string"!=typeof arguments[0])throw new Error("Injector: first argument must be of type string.");if(null===arguments[2])throw new Error("Injector: second argument cannot be null");if(t=arguments[0],e=arguments[1],"string"==typeof e||"number"==typeof e||"object"==typeof e&&!(e instanceof Array))return this.addInstance(t,e),this}else if(1===arguments.length)if(n=arguments[0],"function"==typeof n){if(!n.name)throw new Error("Injector: anonymous functions are not supported.");t=n.name,e=n}else{if(!(n instanceof Array))throw new Error("Injector: unknown parameter set provided");if("function"!=typeof n[n.length-1]||!n[n.length-1].name)throw new Error("Injector: last item in Array is not a function or function has no name.");e=n[n.length-1],t=e.name}return e.$inject=e.$inject||"function"==typeof e.factory&&r.extractArgumentsFromFunction(e.factory)||r.extractArgumentsFromFunction(e),this.addComponent(t,e),this},t}();e.Injector=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(4),i=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i.state=r,i.$$store=e.store,i.dispatch=i.$$store.dispatch,i.$$stateKey=n,i.$$reducer=o,i}return r(e,t),e.prototype.getReducer=function(){return this.$$reducer},e.prototype.getStateKey=function(){return this.$$stateKey},e.prototype.componentDidMount=function(){this.$$store.connect(this)},e.prototype.componentWillUnmount=function(){this.$$store.disconnect(this)},e}(o.Component);e.ControllerView=i},function(t,e){"use strict";function n(t,e,n){return function(r,o){return"undefined"==typeof r.promise?r:(r.promise.then(function(t){o.dispatch({type:e|r.type,data:t})},function(t){o.dispatch({type:n|r.type,data:t})}),{type:t|r.type,data:r.data})}}e.IntegerPromisifer=n},function(t,e){"use strict";function n(t){return function(e,n){return"undefined"==typeof e.service?e:t.injectFunction(e.service)}}e.Injectable=n}]);